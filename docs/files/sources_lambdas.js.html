<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>sources\lambdas.js - funkyjs-2</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="funkyjs-2"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.6.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/funkyJS.html">funkyJS</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/arity.html">arity</a></li>
            
                <li><a href="../modules/arrays.html">arrays</a></li>
            
                <li><a href="../modules/birds.html">birds</a></li>
            
                <li><a href="../modules/combinators.html">combinators</a></li>
            
                <li><a href="../modules/core.html">core</a></li>
            
                <li><a href="../modules/decorators.html">decorators</a></li>
            
                <li><a href="../modules/experiments.html">experiments</a></li>
            
                <li><a href="../modules/lambda.html">lambda</a></li>
            
                <li><a href="../modules/objects.html">objects</a></li>
            
                <li><a href="../modules/type.html">type</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: sources\lambdas.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
;(function (global, factory) {
    var ext,
        it;

    if (typeof define === &#x27;function&#x27; &amp;&amp; define.amd) {
        define([&#x27;./type&#x27;], factory);

    } else if (typeof exports === &#x27;object&#x27;) {
        module.exports = factory(require(&#x27;type&#x27;));

    } else {
        ext = factory(global.funkyJS);
        for (it in ext) {
            if (ext.hasOwnProperty(it)) {
                global.funkyJS[it] = ext[it];
            }
        }

    }

})(this, function (type) {

    /**
    @module lambda
    **/
    var api = {};





    // INTERNAL UTILITES
    // =================
    // A caching object for each created lambda. If a signature is passed twice,
    //   the cached lambda function is returned instead of starting the creation
    //   of a new lambda function
    var cache = Object.create(null);




    /**
    The lambda function creates new functions from string expressions and returns
        them. See also the example below for a example of what the lambda function
        does.

    A &quot;-&gt;&quot; separates the arguments from the function body. If the expression
        contains a underscore &quot;_&quot;, this is the argument. By chaining &quot;-&gt;&quot; between
        the argument names, a curried function is created.

    If the expression begins or ends with an operator or relation, the
        argument is appended/prepended (note that the expression cannot begin
        with a &quot;-&quot;).

    @method lambda
    @for funkyJS
    @param {string|function} f Function or string expression
    @return {function} A lambda function

    @example
        var square = funkyJS.lambda(&#x27;x -&gt; x * x&#x27;);
        square(2);
        // =&gt; 4

        var aPlusB = funkyJS.lambda(&#x27;x, y -&gt; x + y&#x27;);
        aPlusB(&#x27;hello&#x27;, &#x27;world&#x27;);
        // =&gt; &#x27;hello world&#x27;


        var double = funkyJS.lambda(&#x27;_ * 2&#x27;);
        double(2);
        // =&gt; 4


        var divide4By = funkyJS.lambda(&#x27;4/&#x27;);
        divide4By(2);
        // =&gt; 2


        var ifElse = funkyJS.lambda(&#x27;x -&gt; y -&gt; z -&gt; !!x ? y : z&#x27;);
        ifElse(true)(&#x27;yep&#x27;)(&#x27;nope&#x27;);
        // =&gt; &#x27;yep&#x27;

        ifElse(false)(&#x27;yep&#x27;)(&#x27;nope&#x27;);
        // =&gt; &#x27;nope&#x27;

    **/
    api.lambda = function lambda (f) {
        // LAMBDA FACTORY FUNCTION
        // ===============================
        // Shamelessly stolen 98% of it from Oliver Steele&#x27;s
        // Functional JavaScript Library (MIT License)
        // ---
        // https://github.com/osteele/functional-javascript

        var code,
            expr,
            prms,
            hash,
            lhs,
            rhs,
            vrs,
            rgx,
            key,
            i,
            v;

        if (arguments.length &lt; 1) {
            return lambda;
        }

        if (type.isFunction(f) || type.isNotString(f)) {
            return f;
        }

        key = (&#x27;lambda_&#x27; + f).replace(/[\s\-\.,;\:\!\\\[\]\{\}&gt;&lt;\?\/\*\+\&#x27;\&quot;%&amp;|=\(\)]/g, &#x27;_&#x27;);
        if (type.isFunction(cache[key])) {
            return cache[key];
        }

        expr = f;
        code = expr.split(/\s*-&gt;\s*/m);
        prms = [];

        if (code.length &gt; 1) {
            while (code.length) {
                expr = code.pop();
                prms = code.pop().replace(/^\s*(.*)\s*$/, &#x27;$1&#x27;).split(/\s*,\s*|\s+/m);
                code.length &amp;&amp; code.push(&#x27;(function(&#x27; + prms + &#x27;){return(&#x27; + expr + &#x27;)})&#x27;);
            }
        } else if (expr.match(/\b_\b/)) {
            prms = &#x27;_&#x27;;
        } else {
            lhs = expr.match(/^\s*(?:[+*\/%&amp;|\^\.=&lt;&gt;]|!=)/m);
            rhs = expr.match(/[+\-*\/%&amp;|\^\.=&lt;&gt;!]\s*$/m);

            if (lhs || rhs) {
                if (lhs) {
                    prms.push(&#x27;$1&#x27;);
                    expr = &#x27;$1&#x27; + expr;
                }

                if (rhs) {
                    prms.push(&#x27;$2&#x27;);
                    expr += &#x27;$2&#x27;;
                }
            } else {
                hash = &#x27;&#x27;;
                rgx = /(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*\s*:|true|false|null|undefined|this|arguments|&#x27;(?:[^&#x27;\\]|\\.)*&#x27;|&quot;(?:[^&quot;\\]|\\.)*&quot;/g;

                vrs = expr.replace(rgx, &#x27;&#x27;).match(/([a-z_$][a-z_$\d]*)/gi) || [];
                for (i = 0, v; v = vrs[i]; i += 1) {
                    if (hash.indexOf(v) &lt; 0) {
                        prms.push(v);
                        hash += &#x27; # &#x27; + v;
                    }
                }
            }
        }

        // sadly, we cannot do better really than using the function constructor
        //   to create the lambda. also take care to cache it as soon as it is
        //   created
        cache[key] = new Function(prms, &#x27;return (&#x27; + expr + &#x27;)&#x27;);
        return cache[key];
    }



    return api;

});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
