/*! funkyjs-2 2.1.0
 *  David Hofmann <the.urban.drone@gmail.com>, MIT license */
/* globals define, module, exports, require */
!function(a,b){var c,d;if("function"==typeof define&&define.amd)define(["../type"],b);else if("object"==typeof exports)module.exports=b(require("type"));else{c=b(a.funkyJS);for(d in c)c.hasOwnProperty(d)&&(a.funkyJS[d]=c[d])}}(this,function(a){function b(a){return{"@@transducer/init":function(){throw"Not supported"},"@@transducer/step":a,"@@transducer/result":function(a){return a}}}function c(a,b){return function(){return a.call(null,b.apply(null,arguments))}}var d={};return d.isReduced=function(a){return a&&(a["@@transducer/reduced"]||a.__transducer_reduced__)},d.reduced=function(a){return Object.create(null,{"@@transducer/value":{enumerable:!0,writable:!1,value:a},value:{enumerable:!0,writable:!1,value:a},"@@transducer/reduced":{enumerable:!1,writable:!1,value:!0},__transducer_reduced__:{enumerable:!1,writable:!1,value:!0}})},d.deref=d.unReduced=function(a){return d.isReduced(a)?a.value:a},d.reduce=d.foldl=function e(c,f,g){var h,i,j,k,l=a.isFunction(c)?b(c):c;if(void 0===g)return function(a){return e(c,f,a)};if(void 0===f)return function(a,b){return e(c,a,b)};if(h=f,a.isSequencial(g)){for(j=0,k=g.length;k>j;j+=1)if(h=l["@@transducer/step"](h,g[j]),d.isReduced(h)){h=d.deref(h);break}}else if(a.isIterator(g))for(j=g.next();!j.done;){if(h=l["@@transducer/step"](h,j.value),d.isReduced(h)){h=d.deref(h);break}j=g.next()}else if(a.isObject(g))for(i=Object.keys(g),j=0,k=i.length;k>j;j+=1)if(h=l["@@transducer/step"](h,[i[j],g[i[j]]]),d.isReduced(h)){h=d.deref(h);break}return l["@@transducer/result"](h)},d.transduce=function f(c,e,g,h){return void 0===h?function(a){return f(c,e,g,a)}:void 0===g?function(a,b){return f(c,e,a,b)}:void 0===e?function(a,b,d){return f(c,a,b,d)}:d.foldl(c(a.isFunction(e)?b(e):e),g,h)},d.into=function g(b,c,e){if(void 0===e)return function(a){return g(b,c,a)};if(void 0===c)return function(a,c){return g(b,a,c)};if(a.isString(b))return d.transduce(c,d.combine,b,e);if(a.isNumber(b))return d.transduce(c,d.combine,b,e);if(a.isObject(b))return d.transduce(c,d.merge,b,e);if(a.isArray(b))return d.transduce(c,d.conj,b,e);throw new Error("Unsupported input for into(seed, xf, input)")},d.append=function(a,b){return a.push(b),a},d.prepend=function(a,b){return a.unshift(b),a},d.cons=function(a,b){return(Array.isArray(b)?b:[b]).concat(a)},d.conj=function(a,b){return a.concat(b)},d.combine=function(a,b){return a+b},d.join=function(a){return function(b,c){return b+a+c}},d.merge=function(b,c){return a.isObject(c)?Object.keys(c).reduce(function(a,b){return a[b]=c[b],a},b):(b[c[0]]=c[1],b)},d.liftTransformer=function(a){return function(b){return function(c){return{"@@transducer/init":function(){return c["@@transducer/init"]()},"@@transducer/step":function(d,e){return a(c["@@transducer/step"].bind(c),b,d,e)},"@@transducer/result":function(a){return c["@@transducer/result"](a)}}}}},d.flatten=function(a){return{"@@transducer/init":function(){return a["@@transducer/init"]()},"@@transducer/step":function(b,c){return d.foldl({"@@transducer/init":function(){return a["@@transducer/init"]()},"@@transducer/step":function(b,c){var e=a["@@transducer/step"](b,c);return d.isReduced(e)?d.deref(e):e},"@@transducer/result":function(a){return a}},b,c)},"@@transducer/result":function(b){return a["@@transducer/result"](b)}}},d.map=function(a){return function(b){return{"@@transducer/init":function(){return b["@@transducer/init"]()},"@@transducer/step":function(c,d){return b["@@transducer/step"](c,a(d))},"@@transducer/result":function(a){return b["@@transducer/result"](a)}}}},d.flatMap=function(a){return c(d.flatten,d.map(a))},d.filter=function(a){return function(b){return{"@@transducer/init":function(){return b["@@transducer/init"]()},"@@transducer/step":function(c,d){return a(d)?b["@@transducer/step"](c,d):c},"@@transducer/result":function(a){return b["@@transducer/result"](a)}}}},d.drop=function(a){return function(b){var c=a;return{"@@transducer/init":function(){return b["@@transducer/init"]()},"@@transducer/step":function(a,d){return c>0?(c-=1,a):b["@@transducer/step"](a,d)},"@@transducer/result":function(a){return b["@@transducer/result"](a)}}}},d.dropNth=function(a){return function(b){var c=-1;return{"@@transducer/init":function(){return b["@@transducer/init"]()},"@@transducer/step":function(d,e){return c+=1,c===a?d:b["@@transducer/step"](d,e)},"@@transducer/result":function(a){return b["@@transducer/result"](a)}}}},d.dropWhile=function(a){return function(b){var c=!0;return{"@@transducer/init":function(){return b["@@transducer/init"]()},"@@transducer/step":function(d,e){return c&&(c=!!a(e)),c?d:b["@@transducer/step"](d,e)},"@@transducer/result":function(a){return b["@@transducer/result"](a)}}}},d.take=function(a){return function(b){var c=0;return{"@@transducer/init":function(){return b["@@transducer/init"]()},"@@transducer/step":function(e,f){return a>c?(c+=1,b["@@transducer/step"](e,f)):d.reduced(e)},"@@transducer/result":function(a){return b["@@transducer/result"](a)}}}},d.takeNth=function(a){return function(b){var c=-1;return{"@@transducer/init":function(){return b["@@transducer/init"]()},"@@transducer/step":function(e,f){return c+=1,a>c?e:d.reduced(b["@@transducer/step"](e,f))},"@@transducer/result":function(a){return b["@@transducer/result"](a)}}}},d.takeWhile=function(a){return function(b){var c=!0;return{"@@transducer/init":function(){return b["@@transducer/init"]()},"@@transducer/step":function(e,f){return c?(c=!!a(f),c?b["@@transducer/step"](e,f):d.reduced(e)):d.reduced(e)},"@@transducer/result":function(a){return b["@@transducer/result"](a)}}}},d.keep=function(a){return{"@@transducer/init":function(){return a["@@transducer/init"]()},"@@transducer/step":function(b,c){return null!==c&&void 0!==c?a["@@transducer/step"](b,c):b},"@@transducer/result":function(b){return a["@@transducer/result"](b)}}},d.unique=function(a){var b=Object.create(null);return{"@@transducer/init":function(){return a["@@transducer/init"]()},"@@transducer/step":function(c,d){return b[d]?c:(b[d]=!0,a["@@transducer/step"](c,d))},"@@transducer/result":function(b){return a["@@transducer/result"](b)}}},d.partition=function(a){return function(b){var c,d=0,e=[];return{"@@transducer/init":function(){return b["@@transducer/init"]()},"@@transducer/step":function(f,g){return a>d?(d+=1,e.push(g),f):(c=b["@@transducer/step"](f,e),d=0,e=[g],c)},"@@transducer/result":function(a){return e.length<1?b["@@transducer/result"](a):b["@@transducer/result"](b["@@transducer/step"](a,e))}}}},d.partitionBy=function(a){return function(b){var c,d,e,f=0,g=[];return{"@@transducer/init":function(){return b["@@transducer/init"]()},"@@transducer/step":function(h,i){return c=d,d=a(i),1>f||c===d?(f+=1,g.push(i),h):(e=b["@@transducer/step"](h,g),g=[i],e)},"@@transducer/result":function(a){return g.length<1?b["@@transducer/result"](a):b["@@transducer/result"](b["@@transducer/step"](a,g))}}}},{transducers:d}});